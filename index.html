<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/bootstrap.min.css"/>
  <script src="searchScript.js"></script>
  <!-- <link rel="stylesheet" href="css/bootstrap-grid.css"/>
  <link rel="stylesheet" href="css/bootstrap.css"/>
  <link rel="stylesheet" href="css/bootstrap.rtl.css"/>
  <link rel="stylesheet" href="css/bootstrap.rtl.min.css"/>
  <link rel="stylesheet" href="css/bootstrap-grid.min.css"/>
  <link rel="stylesheet" href="css/bootstrap-grid.rtl.css"/>
  <link rel="stylesheet" href="css/bootstrap-grid.rtl.min.css"/>
  <link rel="stylesheet" href="css/bootstrap-reboot.css"/>
  <link rel="stylesheet" href="css/bootstrap-reboot.min.css"/>
  <link rel="stylesheet" href="css/bootstrap-reboot.rtl.css"/>
  <link rel="stylesheet" href="css/bootstrap-reboot.rtl.min.css"/>
  <link rel="stylesheet" href="css/bootstrap-utilities.css"/>
  <link rel="stylesheet" href="css/bootstrap-utilities.min.css"/>
  <link rel="stylesheet" href="css/bootstrap-utilities.rtl.css"/>
  <link rel="stylesheet" href="css/bootstrap-utilities.rtl.min.css"/> -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"/> 
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.min.css"/>   
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/dataTables.bootstrap5.min.css"/>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.24/css/dataTables.jqueryui.min.css"/> 
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/scroller/2.0.3/css/scroller.jqueryui.min.css"/>   
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/material-components-web/4.0.0/material-components-web.min.css"/>   
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/dataTables.material.min.css"/>   

  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.25/js/dataTables.bootstrap5.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.25/js/dataTables.jqueryui.min.js"></script>
  <script src="https://cdn.datatables.net/scroller/2.0.3/js/dataTables.scroller.min.js"></script> 
  <script src="https://cdn.datatables.net/1.10.25/js/dataTables.material.min.js"></script> 
  <style> 
    #tableSenses, td, th {
      border: 1px solid black;
      width: 300px;
    } 
    select#select {
  width: 100px;
  display: inline-block;
}  
  </style>
  <title>CoWin</title>
</head>
<body>
  <header id="home-section">
    <div class="dark-overlay">
      <div class="home-inner container">
        <div class="row">
          <div class="col-lg-12">
              
            <h1>
              Find Covid Vaccines by Type, PinCode, Vaccine Slot Availability in Hospitals
            </h6>
           
          </div>
          <div class="col-lg-8"> 
             
                <script type="text/javascript">amzn_assoc_ad_type ="responsive_search_widget"; amzn_assoc_tracking_id ="searc041-21"; amzn_assoc_marketplace ="amazon"; amzn_assoc_region ="IN"; amzn_assoc_placement =""; amzn_assoc_search_type = "search_widget";amzn_assoc_width ="auto"; amzn_assoc_height ="auto"; amzn_assoc_default_search_category =""; amzn_assoc_default_search_key ="covid";amzn_assoc_theme ="light"; amzn_assoc_bg_color ="FFFFFF"; </script><script src="//z-in.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&Operation=GetScript&ID=OneJS&WS=1&Marketplace=IN"></script>
        
          </div>

          <div class="col-lg-4">
            <div class="card bg-primary border-secondary mb-3 text-center card-form">
              <div class="card-body">
                <h3>Search By State and City</h3>
                <p>Please fill out this form to search</p>
                <form>
                  <div class="input-group mb-3">
                    <select class="form-control" id="locality-dropdown" name="state" onchange="loadSelectedState(this.value)">                               
                    </select>
                  </div>
                  <div class="input-group mb-3">
                    <select class="form-control" id="district-dropdown" name="district">
               
                    </select>
                  </div> 
                  <input type="submit" value="Search" id="btnSearch" class="btn btn-outline-light btn-block">
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
  
  <section id="create-head-section">
    <div class="container">
      <div class="row">
        <div class="col-lg-12"> 
          <div class="card border-secondary mb-1 text-center card-form">
            <div class="card-body">

            <table class="mdl-data-table" style="width:100%">
               
              <th style="text-align: center;" colspan="6">
                Efficancy Of Vaccines in India
              </th>
              <tr>
                <td>
                  COVAXIN (77.8%)
                </td>
                <td>
                  COVISHIELD (63.09%)
                </td>
                <td>
                  SPUTNIK V (92%)
                </td>
                <td>
                  PFIZER BIONTECH (88% AFTER SECOND DOSE)
                </td>
                <td>
                  MODERNA (90%)
                </td> 
                <td>
                  JOHNSON & JOHNSON (66.3%)
                </td> 
              </tr>
            </table>  
            </div>
            </div>
            
        </div> 
        <!-- <div class="col text-center py-5">
          <h1 class="display-4">Create</h1>
          <p class="lead">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Sapiente doloribus ut iure itaque quibusdam rem accusantium
            deserunt reprehenderit sunt minus.</p>
          <a href="#" class="btn btn-outline-light">Find Out More</a>
        </div> -->
        <!-- <select id="select" class="form-control input-sm">
          <option>Seq.</option>
          <option>Name</option>
          <option>Position</option>
          <option>Office</option>
          <option>Start date</option>
          <option>Salary</option>
          </select> -->
        <table id="example" class="mdl-data-table" style="width:100%">
          <thead>
              <tr>
                  <th>Hospital Name</th>
                  <th>Pincode</th>
                  <th>Covishield</th> 
                  <th>Covaxin</th>
                  <th>Sputnik</th>
                  <th>Price</th>  
              </tr>
          </thead>
           <tbody> 
          
           </tbody>
        </table>
 
      </div>
    </div>
  </section>
  <footer>
    <section>
      <div class="container">
        <div class="row">
          <div class="col-lg-12 d-lg-block">
          <div class="col text-center py-5"> 
            <p class="lead"><strong>COVID-19</strong> is spreading in your community, 
            stay safe by taking some simple precautions, 
            such as physical distancing, wearing a mask, keeping rooms well ventilated, 
            avoiding crowds, cleaning your hands, and coughing into a bent elbow or tissue. 
            Check local advice where you live and work. Do it all! </p>       
            <p>
              You also find out more about WHO's recommendations 
              for getting vaccinated on https://www.cowin.gov.in/ page on COVID-19 vaccines.</p>
             <a href="https://www.cowin.gov.in/" class="btn btn-outline-light">Find Out More</a>
            
          </div> 
        </div>
          </div>
          </div>
        </section>
  </footer>>
  
  <script src="js/bootstrap.bundle.min.js">
  </script> 
    <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
     ></script>
</body>
</html>

<script>
  $(document).ready(function () {
          $('#example').DataTable({
            // dom: "<'row'<'col-sm-5'l><'col-sm-7'f>>" +
            //       "<'row'<'col-sm-12'tr>>" +
            //       "<'row'<'col-sm-5'i><'col-sm-7'p>>",
            //       language: {
            //           search: "_INPUT_", //To remove Search Label
            //           searchPlaceholder: "Search..."
            //       },
                  
 
                ajax: {
                    url: 'https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=571&date=19-06-2021',
                    dataSrc: "sessions"
                },
                columnDefs: [ {
                      targets: [ 0 ],
                      orderData: [ 0, 1 ]
                  }, {
                      targets: [ 1 ],
                      orderData: [ 1, 0 ]
                  }, {
                      targets: [ 4 ],
                      orderData: [ 4, 0 ]
                  } ],
                columns: [
                    { data: 'name'},
                    { data: 'pincode' },
                    { data: "available_capacity",
                      "render":function(data,Type,row){
                        if ( row.vaccine === 'COVISHIELD') {
                          
                          return row.available_capacity;}
                          else{
                            return 0;
                          }
                      } 
                  },
                  { data: "available_capacity",
                      "render":function(data,Type,row){
                        if ( row.vaccine === 'COVAXIN') {
                          return row.available_capacity;}
                          else{
                            return 0;
                          }
                      } 
                  },
                  { data: "available_capacity",
                      "render":function(data,Type,row){
                        if ( row.vaccine === 'SPUTNIK') {
                          return row.available_capacity;}
                          else{
                            return 0;
                          }
                      } 
                  }, 
                    {data: 'fee' } 
                ],
                "pageLength": 10
            });

            // $(".dataTables_filter").append(select);
            // $('.dataTables_filter').unbind().bind('keyup', function() {
            //   var colIndex = document.querySelector('#select').selectedIndex;
            //   table.column( colIndex).search( this.value ).draw();
            // });

            // $('#select').change(function() {
            //   table.columns().search('').draw();
            // });  


          $("#btnSearch").on("click", function (e) {
          e.preventDefault(); 
          let droValue=document.getElementById("district-dropdown").value;
          var today = new Date();
          var date = today.getDate()+'-'+(today.getMonth()+1)+'-'+today.getFullYear();
          if(droValue!=""){ 
          //const disurl = 'https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id='+droValue+'&'+'date'+'='+date;
          $("#example").DataTable().destroy();

          $('#example').DataTable({
                ajax: {
                    url: 'https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id='+droValue+'&'+'date'+'='+date,
                    dataSrc: "sessions"
                },
                columns: [
                { data: 'name', 
                  "render":function(data,type,row){                   
                    return data+" "+row.address;

                  }},
                    { data: 'pincode' },
                    { data: "available_capacity",
                      "render":function(data,Type,row){
                        if ( row.vaccine === 'COVISHIELD') {
                          return row.available_capacity;}
                          else{
                            return 0;
                          }
                      } 
                  },
                  { data: "available_capacity",
                      "render":function(data,Type,row){
                        if ( row.vaccine === 'COVAXIN') {
                          return row.available_capacity;}
                          else{
                            return 0;
                          }
                      } 
                  },
                  { data: "available_capacity",
                      "render":function(data,Type,row){
                        if ( row.vaccine === 'SPUTNIK') {
                          return row.available_capacity;}
                          else{
                            return 0;
                          }
                      } 
                  }, 
                    { data: 'fee'}
                     
                ],
                "pageLength": 10
                

            });
          }else{
            alert("Please Choose State and City Values")
          }

          });
          });
</script>
