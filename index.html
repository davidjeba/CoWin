<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/bootstrap.min.css"/>
  <script src="searchScript.js"></script> 
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"/> 
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.min.css"/>   
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/dataTables.bootstrap5.min.css"/>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.24/css/dataTables.jqueryui.min.css"/> 
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/scroller/2.0.3/css/scroller.jqueryui.min.css"/>   
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/material-components-web/4.0.0/material-components-web.min.css"/>   
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/dataTables.material.min.css"/>   
  <link href = "https://fonts.googleapis.com/icon?family=Material+Icons" rel = "stylesheet">
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.25/js/dataTables.bootstrap5.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.25/js/dataTables.jqueryui.min.js"></script>
  <script src="https://cdn.datatables.net/scroller/2.0.3/js/dataTables.scroller.min.js"></script> 
  <script src="https://cdn.datatables.net/1.10.25/js/dataTables.material.min.js"></script> 
  <style> 
  #efficacy{
    border:0px solid black;
  }
  #efficacyTr{
    border:0px solid black;
  }
  #efficacyTd{
    border:0px solid black;
  } 
  </style>
  <title>Find Covid Vaccines by Type, PinCode, Vaccine Slot Availability in Hospitals</title>
</head>
<body>
  <header id="home-section">
    <div class="dark-overlay">
      <div class="home-inner container">
        <div class="row">   
          <center>
            <h1 style="font-size:35px;line-height:48px;color:#282828;font-weight:400;min-height:48px" >Find Covid Vaccines by Type, PinCode, Vaccine Slot Availability in Hospitals</h1>
          </center>           
          <div class="col-lg-8">  
                <script type="text/javascript">amzn_assoc_ad_type ="responsive_search_widget"; amzn_assoc_tracking_id ="searc041-21"; amzn_assoc_marketplace ="amazon"; amzn_assoc_region ="IN"; amzn_assoc_placement =""; amzn_assoc_search_type = "search_widget";amzn_assoc_width ="auto"; amzn_assoc_height ="auto"; amzn_assoc_default_search_category =""; amzn_assoc_default_search_key ="covid";amzn_assoc_theme ="light"; amzn_assoc_bg_color ="FFFFFF"; </script><script src="//z-in.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&Operation=GetScript&ID=OneJS&WS=1&Marketplace=IN"></script>        
          </div> 
          <div class="col-lg-4">
            <div class="card bg-primary border-secondary mb-3 text-center card-form">
              <div class="card-body">
                <h3>Search By State and City</h3>
                <p>Please fill out this form to search</p>
                <form>
                  <div class="input-group mb-3">
                    <select class="form-control" id="locality-dropdown" name="state" onchange="loadSelectedState(this.value)">                               
                    </select>
                  </div>
                  <div class="input-group mb-3">
                    <select class="form-control" id="district-dropdown" name="district">               
                    </select>
                  </div> 
                  <input type="submit" value="Search" id="btnSearch" class="btn btn-outline-light btn-block">
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
  
  <section id="create-head-section">
    <div class="container">
      <div class="row"> 

            <table id="efficacy" class="mdl-data-table"  style="width:100%;border-spacing: 20px;">
               
              <th  style="text-align: center;" colspan="10">
                <label style="font-weight:1000;font-size: 32px; text-align: center;">Helpline</label>
              </th>
              <tr id="efficacyTr">
                <td rowspan="2" id="efficacyTd">
                  <center><span style="font-size: 50px;" class="material-icons">
                    phone_in_talk
                    </span></center>
                </td>
                <td id="efficacyTd">
                  <label style="font-weight: 1000;font-size: 18px; text-align: center;">Number</label>
                </td>
                <td rowspan="2" id="efficacyTd">
                  <center><span style="font-size: 50px;" class="material-icons">
                    support_agent
                    </span></center>
                </td>
                <td id="efficacyTd">
                  <label style="font-weight: 1000;font-size: 18px;text-align: center;">Health Ministry</label>
                </td>
                <td rowspan="2" id="efficacyTd">
                  <center><span style="font-size: 50px;" class="material-icons">
                    child_care
                    </span></center>
                </td>
                <td id="efficacyTd">
                  <label style="font-weight: 1000;font-size: 18px;text-align: center;">Child</label>
                </td>
                <td rowspan="2" id="efficacyTd">
                  <center><span style="font-size: 50px;" class="material-icons">
                    face_retouching_natural
                    </span></center>
                </td>
                <td id="efficacyTd">
                  <label style="font-weight: 1000;font-size: 18px;text-align: center;">Mental Health</label>
                </td>
                <td rowspan="2" id="efficacyTd">
                  <center><span style="font-size: 50px;" class="material-icons">
                    elderly
                    </span></center>
                </td> 
                <td id="efficacyTd">
                  <label style="font-weight: 1000;font-size: 18px;text-align: center;">Senior Citizens</label>
                </td> 
              </tr>
              <tr id="efficacyTr">
               
                <td id="efficacyTd">
                  <a href="tel:91-11-23978046"><label style="font-weight: 1000;font-size: 18px; text-align: center;color:#0134A6;">91-11-23978046</label></a>
                </td>
          
                <td id="efficacyTd">
                  <a href="tel:1075"><label style="font-weight: 1000;font-size: 18px; text-align: center;color:#0134A6;">1075</label></a>
                </td>
            
                <td id="efficacyTd">
                  <a href="tel:1098"><label style="font-weight: 1000;font-size: 18px; text-align: center;color:#0134A6;">1098</label></a>
                </td>
         
                <td id="efficacyTd">
                  <a href="tel:08046110007"><label style="font-weight: 1000;font-size: 18px; text-align: center;color:#0134A6;">08046110007</label></a></td>
                </td>
                
                <td id="efficacyTd">
                  <!--  -->
                  <a href="tel:14567"><label style="font-weight: 1000;font-size: 18px; color:#0134A6; text-align: center;">14567</label></a>
                </td> 
              </tr>
            </table>    
        <table id="example" class="mdl-data-table" style="width:100%">
          <thead>
              <tr>
                  <th>Hospital Name</th>
                  <th>Pincode</th>
                  <th>Covishield</th> 
                  <th>Covaxin</th>
                  <th>Sputnik</th>
                  <th>Price</th>  
                  <th>Age</th>
              </tr>
          </thead>
           <tbody> 
          
           </tbody>
        </table>
 
      </div>
    </div>
  </section>
  <footer>
    <section>
      <div class="container">
        <div class="row">
          <div class="col-lg-12 d-lg-block">
          <div class="col text-center py-5"> 
            <p class="lead"><strong>COVID-19</strong> is spreading in your community, 
            stay safe by taking some simple precautions, 
            such as physical distancing, wearing a mask, keeping rooms well ventilated, 
            avoiding crowds, cleaning your hands, and coughing into a bent elbow or tissue. 
            Check local advice where you live and work. Do it all! </p>       
            <p>
              You also find out more about WHO's recommendations 
              for getting vaccinated on https://www.cowin.gov.in/ page on COVID-19 vaccines.</p>
             <a href="https://www.cowin.gov.in/" class="btn btn-outline-light">Find Out More</a>
            
          </div> 
        </div>
          </div>
          </div>
        </section>
  </footer>>
  
  <script src="js/bootstrap.bundle.min.js">
  </script> 
    <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
     ></script>
</body>
</html>

<script>
  $(document).ready(function () 
    {
      let clickCount = 0;
      let selectedDate="";
      let AllTableValue="";
      var intialhtml = "";
      var html="";
      var Calchtml="";
      var arrowButton = "";       
      var dt = new Date(); 
      let inccount = 0;
        for (i = 0 ; i < 7 ; i++){
          var date,month; 
            date=dt.getDate()+i;
            month=dt.getMonth()+1;
            // if(i=0){
            //   
            // }

            if(date>30){
              for(j=0;j<7;j++){
                date=j+1;
                month=dt.getMonth()+2;
                Calchtml += "<button id =buttonID class='btn btn-default text-center' value="+date+"-"+month+"-"+dt.getFullYear()+">"+date+"-"+month+"-"+dt.getFullYear()+"</button>";             
              }           
              break;   
            }else{
              if(inccount==0){
                intialhtml += "<button id =buttonID style=background:lightgreen;color:white; class='btn btn-default text-center' value="+date+"-"+month+"-"+dt.getFullYear()+">"+date+"-"+month+"-"+dt.getFullYear()+"</button>";             
                inccount++;
              }else{
                html += "<button id =buttonID class='btn btn-default text-center' value="+date+"-"+month+"-"+dt.getFullYear()+">"+date+"-"+month+"-"+dt.getFullYear()+"</button>";             
              }
              
            }
            

        // let buttonID="button"+i;  
        
   
        }

        intialhtml+=html+Calchtml;
        arrowButton="&nbsp;&nbsp;<input type=radio id=eightAge name=fav_language value=18> 18+ &nbsp;<input type=radio id=fourtyAge name=fav_language value=45> 45+";          

        let droValue=571;
        var today = new Date();
        var date = today.getDate()+'-'+(today.getMonth()+1)+'-'+today.getFullYear();
        $('#example').append('<caption style="caption-side: top;text-align:left">'+intialhtml+'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+ arrowButton+'</caption>');                  
        //Default Record Load
        myCommonFetcher(droValue,date);
    

    function myCommonFetcher(dropVal,dateVal ){

      if(dropVal!="")
      { 
           $("#example").DataTable().destroy();
           AllTableValue= $('#example').DataTable({ 
                ajax: {
                    url: 'https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id='+dropVal+'&'+'date'+'='+dateVal,
                    dataSrc: "sessions"
                },
                "order": [[ 2, "desc" ]], 
                columns: [                  
                 { data: 'name', 
                 "render":function(data,Type,row){
                   {
                    var Addspace="&nbsp;&nbsp;"; 
                    var control="<a href=https://bit.ly/BookVaccination class='btn btn-outline-light'>Book Slot</a>"
                    // return data+" "+row.address; 
                    return data+" "+row.address+Addspace+control;
                   }           
                    
                  }},
                    { data: 'pincode' },
                    { data: "available_capacity",
                      "render":function(data,Type,row){
                        if ( row.vaccine === 'COVISHIELD') {                          
                          return row.available_capacity;}
                          else{
                            return 0;
                          }
                      } 
                  },
                  { data: "available_capacity",
                      "render":function(data,Type,row){
                        if ( row.vaccine === 'COVAXIN') {
                          return row.available_capacity;}
                          else{
                            return 0;
                          }
                      } 
                  },
                  { data: "available_capacity",
                      "render":function(data,Type,row){
                        if ( row.vaccine === 'SPUTNIK') {
                          return row.available_capacity;}
                          else{
                            return 0;
                          }
                      } 
                  },  
                    { data: 'fee'},
                    {data : "min_age_limit",
                  'visible':false }
                     
                ],
              
                "pageLength": 50
                

            }); 
        }
        else
        {
          alert("Please Choose State and City Values");
        } 
      }


      $('#btnSearch').click(function(e){
              e.preventDefault(); 
              let droValue=document.getElementById("district-dropdown").value;
              var today = new Date();
              var date = today.getDate()+'-'+(today.getMonth()+1)+'-'+today.getFullYear();
              selectedDate=date;    
              myCommonFetcher(droValue,date);
            });
      $('button').click(function(e){
        e.preventDefault();  
        var fired_button = $(this).val(); 
        var date = new Date(); 
        var parent=this; 
        var date = fired_button;
        selectedDate=date;
        let droValue=document.getElementById("district-dropdown").value;    
       
        if(droValue!=""){
          
          if(clickCount>=1){ 
            clickCount--;    
            parent.style.background='#ffffff';
            parent.style.color='black';
            }
            else{
              parent.style.background='lightgreen';
              parent.style.color='#ffffff';
                clickCount++;
            } 
        myCommonFetcher(droValue,date);
      }else{
        alert("Please Choose State and City Values");
      }
      });   
       
      $('#eightAge').click(function(e){
        //var teenRadioValue = $(this).val();
 
        AllTableValue.column(6).search('18').draw(); 
      });
      $('#fourtyAge').click(function(e){
       // var tyRadioValue = $(this).val();
        AllTableValue.column(6).search('45').draw();
      });
  });
    

</script>
